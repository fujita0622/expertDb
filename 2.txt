演習問題
2-1 サーバーのクラスタリング構成にはどのようながありうるか、調べてください。

2-2 ハードウェアのサイジングを行うには、現行システムのハードウェアリソース情報が欠かせません。これを取得するためのOSコマンドを、OS別に調べなさい

2-3 今後行われるシステム更改(つまりシステムのリプレース)プロジェクトにおいて、サイジングを担当することになりました。
話を単純にするために、単純なハードウェアリプレースのみで、アプリケーションには改修がはいらず、現行道理と仮定しましょう。
変更されるのは、サーバーやストレージなどハードウェアのみです。また、現行システムのアクセスログやリソースログは取得することができるため、レスポンスとスループットは算出できます。
しかし、プロジェクトマネージャーからは、つぎのように言われています。
「このシステム。今のお客さんからピーク時間帯になると遅いと苦情がくるんだ。今度はこんなことがないように、適切なハードウェアを選んでくれよ。」
プロジェクトの予算は少ないため、プロトタイプ検証を行う余裕はありません。さて、みなさんはどんな手順でサーバーのCPUについて机上サイニングを実行すれば良いでしょうか?
なるべく具体的に、主順を考えてください。


[2-1.回答]
1. アクティブ/アクティブ構成
すべてのサーバが稼働系サーバとして稼働している構成である。例えば、2台のサーバでクラスタを構成した場合、2台とも同じサービスを提供し、同時に共有ディスクに書き込みができる構成です。
この構成は負荷分散の機能も兼ね備えるため、ハイパフォーマンスでシステム利用率も高い。

2. アクティブ－パッシブ構成
共有ディスクを1台のサーバが専有するモデルです。
クラスタを構成するサーバは、稼働系と待機系に分けられ、仮に2台のサーバでクラスタを構成した場合は、稼働系サーバのみでクライアントへサービスを提供し、障害が発生した場合に初めて待機系に切り替える、いわゆるホットスタンバイ型のクラスタ構成です。
切り替え時にサーバのメモリ上にあるデータの扱いをどうするかを考慮する必要はあるが、構成が単純なため、さまざまなアプリケーションで対応が容易という利点がある。


[2-2.回答]
windows:
CPU:systeminfo
メモリ:systeminfo

mac:
CPU:system_profiler SPHardwareDataType
メモリ:system_profiler SPHardwareDataType

linux: 
CPU:cat proc/cpuinfo
メモリ:cat proc/meminfo

[2-3.回答]
① アクセスログを確認し、時間帯ごとのアクセスログとリソースログを確認する。
② アクセスログとリソースログから最もアクセスが集中している時間帯(ピーク時間帯)の
　　リソース使用状況（メモリ使用率、CPU使用率）と性能（レスポンスタイム、スループット）を調べる。

③ 調べたピーク時間帯のCPU使用率、メモリ使用率の数値を基に、現在のピーク時間帯のアクセスに耐えられる
　　CPU使用率、メモリ使用率を決める
　　【例】
　　　○現在のピーク時間帯のリソース状況
　　　　CPU使用率:90%
　　　　メモリ使用率:90%

　　　○サイジング後のピーク時間帯のリソース状況
　　　　CPU使用率:40-70%
　　　　メモリ使用率:40-70%

④ 調べたピーク時時間帯レスポンスタイムとスループットを基に
　　システム利用者のストレスにならない性能になるように
　　レスポンスタイムとスループットを決める
　　【例】
　　　○現在のピーク時間帯のレスポンスタイムとスループット
　　　　レスポンスタイム(秒):5
　　　　スループット（件/秒):100/5

　　　○サイジング後のピーク時間帯のレスポンスタイムとスループット
　　　　レスポンスタイム(秒):1
　　　　スループット（件/秒):100/1

⑤ ③,④で決めた内容を満たすハードフェアを選ぶ